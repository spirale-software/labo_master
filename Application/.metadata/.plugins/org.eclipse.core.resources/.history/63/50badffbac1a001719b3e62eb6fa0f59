package services.general;

import javax.inject.Inject;

import models.Channel;
import models.Role;
import models.RoleType;
import models.User;
import play.db.jpa.Transactional;
import services.data.dao.ChannelDAO;
import services.data.dao.RoleDAO;

public class BuildBdDefaultValue {
	
	private ChannelDAO channelDAO;
	private RoleDAO roleDAO;
	
	@Inject
	public BuildBdDefaultValue(ChannelDAO channelDAO, RoleDAO roleDAO) {
		this.channelDAO = channelDAO;
		this.roleDAO = roleDAO;
	}
	
	@Transactional
	public void createDbDefaultValue() {
		fillDBRole();
		fillDBChannel();
	}
	
	@Transactional
	public void fillDBRole() {
		Role role1 = new Role();
		role1.setRoleName(RoleType.MEMBRE_FACULTAIRE.toString());
		roleDAO.insert(role1);
		
		Role role2 = new Role();
		role2.setRoleName(RoleType.RESP_CANAL.toString());
		roleDAO.insert(role2);
		
		Role role3 = new Role();
		role3.setRoleName(RoleType.RESP_COMMUNICATION.toString());
		roleDAO.insert(role3);
		
		Role role4 = new Role();
		role4.setRoleName(RoleType.PRESIDENT.toString());
		roleDAO.insert(role4);
	
	}
	
	@Transactional
	public void fillDBChannel() {
		Channel channel1 = new Channel();
		channel1.setChannelName("FACEBOOK");
		channelDAO.insertChannel(channel1);
		
		Channel channel2 = new Channel();
		channel2.setChannelName("TWIITER");
		channelDAO.insertChannel(channel2);
		
		Channel channel3 = new Channel();
		channel3.setChannelName("MAILINGLIST");
		channelDAO.insertChannel(channel3);
	}
	
	@Transactional
	public void fillDBUser() {
		User user1 = new User();
		user1.setEmail("cindy@outlook.fr");
		user1.setUsername("Madix");
		Role role1 = roleDAO.getRoleByName(RoleType.RESP_COMMUNICATION.toString());
		user1.setUserRole(role1);
		user1.setPassword(CryptWithMD5.cryptWithMD5("123"));
		
	}
	
	

}
