package controllers;



import javax.inject.Inject;

import models.MembreFacultaire;
import play.data.FormFactory;
import play.data.Form;
import play.mvc.*;
import views.html.*;
import play.db.jpa.Transactional;
import play.db.jpa.JPAApi;

import play.db.*;

public class ConnexionController extends Controller {
	
	private FormFactory formFactory;
	private JPAApi jpaApi;
	
	@Inject
	public ConnexionController(FormFactory formFactory, JPAApi jpaApi) {
		
		this.formFactory = formFactory;
		this.jpaApi = jpaApi;
	}
	
	public Result indexAction() {
		
		Form<MembreFacultaire> formMembre = formFactory.form(MembreFacultaire.class);
		
		return ok(index.render(formMembre));		
	}
	
	@Transactional
	public Result connexionAction() {
		
		Form<MembreFacultaire> formMembre = formFactory.form(MembreFacultaire.class);
		MembreFacultaire membreFacultaire = formMembre.bindFromRequest().get();
		
		//this.jpaApi.em().persist(membreFacultaire);
		
		String prenom = membreFacultaire.getPrenom();
		String email = membreFacultaire.getEmail();
		String pwd = membreFacultaire.getMotDePasse();
		
		return ok(prenom + " " + email + " "+ pwd);		
	}
	
	
	
	public Result verifierAction() {
		
		return ok();
	}

}
